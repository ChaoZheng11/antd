{"remainingRequest":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\components\\table\\advance\\ActionColumns.vue?vue&type=style&index=0&id=2009280e&scoped=true&lang=less&","dependencies":[{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\components\\table\\advance\\ActionColumns.vue","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hY3Rpb24tY29sdW1uc3sKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgLmNoZWNrLWFsbHsKICAgIG1hcmdpbi1yaWdodDogOHB4OwogIH0KICAubGVmdCwucmlnaHR7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpOwogIH0KICAuYWN0aXZlewogICAgY29sb3I6IEBwcmltYXJ5LWNvbG9yOwogIH0KfQo="},{"version":3,"sources":["ActionColumns.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ActionColumns.vue","sourceRoot":"src/components/table/advance","sourcesContent":["<template>\n  <div class=\"action-columns\" ref=\"root\">\n      <a-popover v-model=\"visible\" placement=\"bottomRight\" trigger=\"click\" :get-popup-container=\"() => $refs.root\">\n        <div slot=\"title\">\n          <a-checkbox :indeterminate=\"indeterminate\" :checked=\"checkAll\" @change=\"onCheckAllChange\" class=\"check-all\" />列展示\n          <a-button @click=\"resetColumns\" style=\"float: right\" type=\"link\" size=\"small\">重置</a-button>\n        </div>\n        <a-list style=\"width: 100%\" size=\"small\" :key=\"i\" v-for=\"(col, i) in columns\" slot=\"content\">\n          <a-list-item>\n            <a-checkbox v-model=\"col.visible\" @change=\"e => onCheckChange(e, col)\"/>\n            <template v-if=\"col.title\">\n              {{col.title}}:\n            </template>\n            <slot v-else-if=\"col.slots && col.slots.title\" :name=\"col.slots.title\"></slot>\n            <template slot=\"actions\">\n              <a-tooltip title=\"固定在列头\" :mouseEnterDelay=\"0.5\" :get-popup-container=\"() => $refs.root\">\n                <a-icon :class=\"['left', {active: col.fixed === 'left'}]\" @click=\"fixColumn('left', col)\" type=\"vertical-align-top\" />\n              </a-tooltip>\n              <a-tooltip title=\"固定在列尾\" :mouseEnterDelay=\"0.5\" :get-popup-container=\"() => $refs.root\">\n                <a-icon :class=\"['right', {active: col.fixed === 'right'}]\" @click=\"fixColumn('right', col)\" type=\"vertical-align-bottom\" />\n              </a-tooltip>\n              <a-tooltip title=\"添加搜索\" :mouseEnterDelay=\"0.5\" :get-popup-container=\"() => $refs.root\">\n                <a-icon :class=\"{active: col.searchAble}\" @click=\"setSearch(col)\" type=\"search\" />\n              </a-tooltip>\n            </template>\n          </a-list-item>\n        </a-list>\n        <a-icon class=\"action\" type=\"setting\" />\n      </a-popover>\n  </div>\n</template>\n\n<script>\n  import cloneDeep from 'lodash.clonedeep'\n\n  export default {\n    name: 'ActionColumns',\n    props: ['columns', 'visibleColumns'],\n    data() {\n      return {\n        visible: false,\n        indeterminate: false,\n        checkAll: true,\n        checkedCounts: this.columns.length,\n        backColumns: cloneDeep(this.columns)\n      }\n    },\n    watch: {\n      checkedCounts(val) {\n        this.checkAll = val === this.columns.length\n        this.indeterminate = val > 0 && val < this.columns.length\n      },\n      columns(newVal, oldVal) {\n        if (newVal != oldVal) {\n          this.checkedCounts = newVal.length\n          this.formatColumns(newVal)\n        }\n      }\n    },\n    created() {\n      this.formatColumns(this.columns)\n    },\n    methods: {\n      onCheckChange(e, col) {\n        if (!col.visible) {\n          this.checkedCounts -= 1\n        } else {\n          this.checkedCounts += 1\n        }\n      },\n      fixColumn(fixed, col) {\n        if (fixed !== col.fixed) {\n          this.$set(col, 'fixed', fixed)\n        } else {\n          this.$set(col, 'fixed', undefined)\n        }\n      },\n      setSearch(col) {\n        this.$set(col, 'searchAble', !col.searchAble)\n        if (!col.searchAble && col.search) {\n          this.resetSearch(col)\n        }\n      },\n      resetSearch(col) {\n        // col.search.value = col.dataType === 'boolean' ? false : undefined\n        col.search.value = undefined\n        col.search.backup = undefined\n      },\n      resetColumns() {\n        const {columns, backColumns} = this\n        let counts = columns.length\n        backColumns.forEach((back, index) => {\n          const column = columns[index]\n          column.visible = back.visible === undefined || back.visible\n          if (!column.visible) {\n            counts -= 1\n          }\n          if (back.fixed !== undefined) {\n            column.fixed = back.fixed\n          } else {\n            this.$set(column, 'fixed', undefined)\n          }\n          this.$set(column, 'searchAble', back.searchAble)\n          // column.searchAble = back.searchAble\n          this.resetSearch(column)\n        })\n        this.checkedCounts = counts\n        this.visible = false\n        this.$emit('reset', this.getConditions(columns))\n      },\n      onCheckAllChange(e) {\n        if (e.target.checked) {\n          this.checkedCounts = this.columns.length\n          this.columns.forEach(col => col.visible = true)\n        } else {\n          this.checkedCounts = 0\n          this.columns.forEach(col => col.visible = false)\n        }\n      },\n      getConditions(columns) {\n        const conditions = {}\n        columns.filter(item => item.search.value !== undefined && item.search.value !== '' && item.search.value !== null)\n          .forEach(col => {\n            conditions[col.dataIndex] = col.search.value\n          })\n        return conditions\n      },\n      formatColumns(columns) {\n        for (let col of columns) {\n          if (col.visible === undefined) {\n            this.$set(col, 'visible', true)\n          }\n          if (!col.visible) {\n            this.checkedCounts -= 1\n          }\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"less\">\n.action-columns{\n  display: inline-block;\n  .check-all{\n    margin-right: 8px;\n  }\n  .left,.right{\n    transform: rotate(-90deg);\n  }\n  .active{\n    color: @primary-color;\n  }\n}\n</style>"]}]}