{"remainingRequest":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\components\\table\\StandardTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\components\\table\\StandardTable.vue","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\babel.config.js","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvbWF4emgvT25lRHJpdmUvXHU2ODRDXHU5NzYyL3Z1ZS1hbnRkLWFkbWluLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1N0YW5kYXJkVGFibGUnLAogIHByb3BzOiB7CiAgICBib3JkZXJlZDogQm9vbGVhbiwKICAgIGxvYWRpbmc6IFtCb29sZWFuLCBPYmplY3RdLAogICAgY29sdW1uczogQXJyYXksCiAgICBkYXRhU291cmNlOiBBcnJheSwKICAgIHJvd0tleTogewogICAgICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0sCiAgICAgIGRlZmF1bHQ6ICdrZXknCiAgICB9LAogICAgcGFnaW5hdGlvbjogewogICAgICB0eXBlOiBbT2JqZWN0LCBCb29sZWFuXSwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHNlbGVjdGVkUm93czogQXJyYXksCiAgICBleHBhbmRlZFJvd0tleXM6IEFycmF5LAogICAgZXhwYW5kZWRSb3dSZW5kZXI6IEZ1bmN0aW9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmVlZFRvdGFsTGlzdDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVTZWxlY3Q6IGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdChzZWxlY3RlZFJvd0tleXMsIHNlbGVjdGVkUm93cykgewogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0ZWRSb3dzJywgc2VsZWN0ZWRSb3dzKTsKICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0ZWRSb3dDaGFuZ2UnLCBzZWxlY3RlZFJvd0tleXMsIHNlbGVjdGVkUm93cyk7CiAgICB9LAogICAgaW5pdFRvdGFsTGlzdDogZnVuY3Rpb24gaW5pdFRvdGFsTGlzdChjb2x1bW5zKSB7CiAgICAgIHZhciB0b3RhbExpc3QgPSBjb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLm5lZWRUb3RhbDsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICAgICAgICB0b3RhbDogMAogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRvdGFsTGlzdDsKICAgIH0sCiAgICBvbkNsZWFyOiBmdW5jdGlvbiBvbkNsZWFyKCkgewogICAgICB0aGlzLnVwZGF0ZVNlbGVjdChbXSwgW10pOwogICAgICB0aGlzLiRlbWl0KCdjbGVhcicpOwogICAgfSwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShwYWdpbmF0aW9uLCBmaWx0ZXJzLCBzb3J0ZXIsIF9yZWYpIHsKICAgICAgdmFyIGN1cnJlbnREYXRhU291cmNlID0gX3JlZi5jdXJyZW50RGF0YVNvdXJjZTsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgcGFnaW5hdGlvbiwgZmlsdGVycywgc29ydGVyLCB7CiAgICAgICAgY3VycmVudERhdGFTb3VyY2U6IGN1cnJlbnREYXRhU291cmNlCiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubmVlZFRvdGFsTGlzdCA9IHRoaXMuaW5pdFRvdGFsTGlzdCh0aGlzLmNvbHVtbnMpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbGVjdGVkUm93czogZnVuY3Rpb24gc2VsZWN0ZWRSb3dzKF9zZWxlY3RlZFJvd3MpIHsKICAgICAgdGhpcy5uZWVkVG90YWxMaXN0ID0gdGhpcy5uZWVkVG90YWxMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgdG90YWw6IF9zZWxlY3RlZFJvd3MucmVkdWNlKGZ1bmN0aW9uIChzdW0sIHZhbCkgewogICAgICAgICAgICB2YXIgdjsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdiA9IHZhbFtpdGVtLmRhdGFJbmRleF0gPyB2YWxbaXRlbS5kYXRhSW5kZXhdIDogZXZhbCgidmFsLiIuY29uY2F0KGl0ZW0uZGF0YUluZGV4KSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgICAgICAgICB2ID0gdmFsW2l0ZW0uZGF0YUluZGV4XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdiA9ICFpc05hTihwYXJzZUZsb2F0KHYpKSA/IHBhcnNlRmxvYXQodikgOiAwOwogICAgICAgICAgICByZXR1cm4gc3VtICsgdjsKICAgICAgICAgIH0sIDApCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNlbGVjdGVkUm93S2V5czogZnVuY3Rpb24gc2VsZWN0ZWRSb3dLZXlzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRSb3dzLm1hcChmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBfdGhpcy5yb3dLZXkgPT09ICdmdW5jdGlvbicgPyBfdGhpcy5yb3dLZXkocmVjb3JkKSA6IHJlY29yZFtfdGhpcy5yb3dLZXldOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACAA,uBADA;AAEAC;AACAC,qBADA;AAEAC,8BAFA;AAGAC,kBAHA;AAIAC,qBAJA;AAKAC;AACAC,8BADA;AAEAC;AAFA,KALA;AASAC;AACAF,6BADA;AAEAC;AAFA,KATA;AAaAE,uBAbA;AAcAC,0BAdA;AAeAC;AAfA,GAFA;AAmBAC,MAnBA,kBAmBA;AACA;AACAC;AADA;AAGA,GAvBA;AAwBAC;AACAC,gBADA,wBACAC,eADA,EACAP,YADA,EACA;AACA;AACA;AACA,KAJA;AAKAQ,iBALA,yBAKAd,OALA,EAKA;AACA;AAAA;AAAA,SACAe,GADA,CACA;AACA,+CACAC,IADA;AAEAC;AAFA;AAIA,OANA;AAOA;AACA,KAdA;AAeAC,WAfA,qBAeA;AACA;AACA;AACA,KAlBA;AAmBAC,YAnBA,oBAmBAd,UAnBA,EAmBAe,OAnBA,EAmBAC,MAnBA,QAmBA;AAAA;AACA;AAAAC;AAAA;AACA;AArBA,GAxBA;AA+CAC,SA/CA,qBA+CA;AACA;AACA,GAjDA;AAkDAC;AACAlB,gBADA,wBACAA,aADA,EACA;AACA;AACA,+CACAU,IADA;AAEAC;AACA;;AACA;AACAQ;AACA,aAFA,CAEA;AACAA;AACA;;AACAA;AACA;AACA,WATA,EASA,CATA;AAFA;AAaA,OAdA;AAeA;AAjBA,GAlDA;AAqEAC;AACAb,mBADA,6BACA;AAAA;;AACA;AACA;AACA,OAFA;AAGA;AALA;AArEA","names":["name","props","bordered","loading","columns","dataSource","rowKey","type","default","pagination","selectedRows","expandedRowKeys","expandedRowRender","data","needTotalList","methods","updateSelect","selectedRowKeys","initTotalList","map","item","total","onClear","onChange","filters","sorter","currentDataSource","created","watch","v","computed"],"sourceRoot":"src/components/table","sources":["StandardTable.vue"],"sourcesContent":["<template>\n  <div class=\"standard-table\">\n    <div class=\"alert\">\n      <a-alert type=\"info\" :show-icon=\"true\" v-if=\"selectedRows\">\n        <div class=\"message\" slot=\"message\">\n          已选择&nbsp;<a>{{selectedRows.length}}</a>&nbsp;项 <a class=\"clear\" @click=\"onClear\">清空</a>\n          <template  v-for=\"(item, index) in needTotalList\" >\n            <div v-if=\"item.needTotal\" :key=\"index\">\n              {{item.title}}总计&nbsp;\n              <a>{{item.customRender ? item.customRender(item.total) : item.total}}</a>\n            </div>\n          </template>\n        </div>\n      </a-alert>\n    </div>\n    <a-table\n      :bordered=\"bordered\"\n      :loading=\"loading\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :rowKey=\"rowKey\"\n      :pagination=\"pagination\"\n      :expandedRowKeys=\"expandedRowKeys\"\n      :expandedRowRender=\"expandedRowRender\"\n      @change=\"onChange\"\n      :rowSelection=\"selectedRows ? {selectedRowKeys: selectedRowKeys, onChange: updateSelect} : undefined\"\n    >\n      <template slot-scope=\"text, record, index\" :slot=\"slot\" v-for=\"slot in Object.keys($scopedSlots).filter(key => key !== 'expandedRowRender') \">\n        <slot :name=\"slot\" v-bind=\"{text, record, index}\"></slot>\n      </template>\n      <template :slot=\"slot\" v-for=\"slot in Object.keys($slots)\">\n        <slot :name=\"slot\"></slot>\n      </template>\n      <template slot-scope=\"record, index, indent, expanded\" :slot=\"$scopedSlots.expandedRowRender ? 'expandedRowRender' : ''\">\n        <slot v-bind=\"{record, index, indent, expanded}\" :name=\"$scopedSlots.expandedRowRender ? 'expandedRowRender' : ''\"></slot>\n      </template>\n    </a-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StandardTable',\n  props: {\n    bordered: Boolean,\n    loading: [Boolean, Object],\n    columns: Array,\n    dataSource: Array,\n    rowKey: {\n      type: [String, Function],\n      default: 'key'\n    },\n    pagination: {\n      type: [Object, Boolean],\n      default: true\n    },\n    selectedRows: Array,\n    expandedRowKeys: Array,\n    expandedRowRender: Function\n  },\n  data () {\n    return {\n      needTotalList: []\n    }\n  },\n  methods: {\n    updateSelect (selectedRowKeys, selectedRows) {\n      this.$emit('update:selectedRows', selectedRows)\n      this.$emit('selectedRowChange', selectedRowKeys, selectedRows)\n    },\n    initTotalList (columns) {\n      const totalList = columns.filter(item => item.needTotal)\n        .map(item => {\n          return {\n            ...item,\n            total: 0\n          }\n        })\n      return totalList\n    },\n    onClear() {\n      this.updateSelect([], [])\n      this.$emit('clear')\n    },\n    onChange(pagination, filters, sorter, {currentDataSource}) {\n      this.$emit('change', pagination, filters, sorter, {currentDataSource})\n    }\n  },\n  created () {\n    this.needTotalList = this.initTotalList(this.columns)\n  },\n  watch: {\n    selectedRows (selectedRows) {\n      this.needTotalList = this.needTotalList.map(item => {\n        return {\n          ...item,\n          total: selectedRows.reduce((sum, val) => {\n            let v\n            try{\n              v = val[item.dataIndex] ? val[item.dataIndex] : eval(`val.${item.dataIndex}`);\n            }catch(_){\n              v = val[item.dataIndex];\n            }\n            v = !isNaN(parseFloat(v)) ? parseFloat(v) : 0;\n            return sum + v\n          }, 0)\n        }\n      })\n    }\n  },\n  computed: {\n    selectedRowKeys() {\n      return this.selectedRows.map(record => {\n        return (typeof this.rowKey === 'function') ? this.rowKey(record) : record[this.rowKey]\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.standard-table{\n  .alert{\n    margin-bottom: 16px;\n    .message{\n      a{\n        font-weight: 600;\n      }\n    }\n    .clear{\n      float: right;\n    }\n  }\n}\n</style>\n"]}]}