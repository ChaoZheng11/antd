{"remainingRequest":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\router\\guards.js","dependencies":[{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\router\\guards.js","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\babel.config.js","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGhhc0F1dGhvcml0eSB9IGZyb20gJ0AvdXRpbHMvYXV0aG9yaXR5LXV0aWxzJzsKaW1wb3J0IHsgbG9naW5JZ25vcmUgfSBmcm9tICdAL3JvdXRlci9pbmRleCc7CmltcG9ydCB7IGNoZWNrQXV0aG9yaXphdGlvbiB9IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOwovKioKICog6L+b5bqm5p2h5byA5aeLCiAqIEBwYXJhbSB0bwogKiBAcGFyYW0gZm9ybQogKiBAcGFyYW0gbmV4dAogKi8KCnZhciBwcm9ncmVzc1N0YXJ0ID0gZnVuY3Rpb24gcHJvZ3Jlc3NTdGFydCh0bywgZnJvbSwgbmV4dCkgewogIC8vIHN0YXJ0IHByb2dyZXNzIGJhcgogIGlmICghTlByb2dyZXNzLmlzU3RhcnRlZCgpKSB7CiAgICBOUHJvZ3Jlc3Muc3RhcnQoKTsKICB9CgogIG5leHQoKTsKfTsKLyoqCiAqIOeZu+W9leWuiOWNqwogKiBAcGFyYW0gdG8KICogQHBhcmFtIGZvcm0KICogQHBhcmFtIG5leHQKICogQHBhcmFtIG9wdGlvbnMKICovCgoKdmFyIGxvZ2luR3VhcmQgPSBmdW5jdGlvbiBsb2dpbkd1YXJkKHRvLCBmcm9tLCBuZXh0LCBvcHRpb25zKSB7CiAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7CgogIGlmICghbG9naW5JZ25vcmUuaW5jbHVkZXModG8pICYmICFjaGVja0F1dGhvcml6YXRpb24oKSkgewogICAgbWVzc2FnZS53YXJuaW5nKCfnmbvlvZXlt7LlpLHmlYjvvIzor7fph43mlrDnmbvlvZUnKTsKICAgIG5leHQoewogICAgICBwYXRoOiAnL2xvZ2luJwogICAgfSk7CiAgfSBlbHNlIHsKICAgIG5leHQoKTsKICB9Cn07Ci8qKgogKiDmnYPpmZDlrojljasKICogQHBhcmFtIHRvCiAqIEBwYXJhbSBmb3JtCiAqIEBwYXJhbSBuZXh0CiAqIEBwYXJhbSBvcHRpb25zCiAqLwoKCnZhciBhdXRob3JpdHlHdWFyZCA9IGZ1bmN0aW9uIGF1dGhvcml0eUd1YXJkKHRvLCBmcm9tLCBuZXh0LCBvcHRpb25zKSB7CiAgdmFyIHN0b3JlID0gb3B0aW9ucy5zdG9yZSwKICAgICAgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTsKICB2YXIgcGVybWlzc2lvbnMgPSBzdG9yZS5nZXR0ZXJzWydhY2NvdW50L3Blcm1pc3Npb25zJ107CiAgdmFyIHJvbGVzID0gc3RvcmUuZ2V0dGVyc1snYWNjb3VudC9yb2xlcyddOwoKICBpZiAoIWhhc0F1dGhvcml0eSh0bywgcGVybWlzc2lvbnMsIHJvbGVzKSkgewogICAgbWVzc2FnZS53YXJuaW5nKCJcdTVCRjlcdTRFMERcdThENzdcdUZGMENcdTYwQThcdTY1RTBcdTY3NDNcdThCQkZcdTk1RUVcdTk4NzVcdTk3NjI6ICIuY29uY2F0KHRvLmZ1bGxQYXRoLCAiXHVGRjBDXHU4QkY3XHU4MDU0XHU3Q0ZCXHU3QkExXHU3NDA2XHU1NDU4IikpOwogICAgbmV4dCh7CiAgICAgIHBhdGg6ICcvNDAzJwogICAgfSk7IC8vIE5Qcm9ncmVzcy5kb25lKCkKICB9IGVsc2UgewogICAgbmV4dCgpOwogIH0KfTsKLyoqCiAqIOa3t+WQiOWvvOiIquaooeW8j+S4i+S4gOe6p+iPnOWNlei3s+i9rOmHjeWumuWQkQogKiBAcGFyYW0gdG8KICogQHBhcmFtIGZyb20KICogQHBhcmFtIG5leHQKICogQHBhcmFtIG9wdGlvbnMKICogQHJldHVybnMgeyp9CiAqLwoKCnZhciByZWRpcmVjdEd1YXJkID0gZnVuY3Rpb24gcmVkaXJlY3RHdWFyZCh0bywgZnJvbSwgbmV4dCwgb3B0aW9ucykgewogIHZhciBzdG9yZSA9IG9wdGlvbnMuc3RvcmU7CgogIHZhciBnZXRGaXJzdENoaWxkID0gZnVuY3Rpb24gZ2V0Rmlyc3RDaGlsZChyb3V0ZXMpIHsKICAgIHZhciByb3V0ZSA9IHJvdXRlc1swXTsKCiAgICBpZiAoIXJvdXRlLmNoaWxkcmVuIHx8IHJvdXRlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gcm91dGU7CiAgICB9CgogICAgcmV0dXJuIGdldEZpcnN0Q2hpbGQocm91dGUuY2hpbGRyZW4pOwogIH07CgogIGlmIChzdG9yZS5zdGF0ZS5zZXR0aW5nLmxheW91dCA9PT0gJ21peCcpIHsKICAgIHZhciBmaXJzdE1lbnUgPSBzdG9yZS5nZXR0ZXJzWydzZXR0aW5nL2ZpcnN0TWVudSddOwoKICAgIGlmIChmaXJzdE1lbnUuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5mdWxsUGF0aCA9PT0gdG8uZnVsbFBhdGg7CiAgICB9KSkgewogICAgICBzdG9yZS5jb21taXQoJ3NldHRpbmcvc2V0QWN0aXZhdGVkRmlyc3QnLCB0by5mdWxsUGF0aCk7CiAgICAgIHZhciBzdWJNZW51ID0gc3RvcmUuZ2V0dGVyc1snc2V0dGluZy9zdWJNZW51J107CgogICAgICBpZiAoc3ViTWVudS5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIHJlZGlyZWN0ID0gZ2V0Rmlyc3RDaGlsZChzdWJNZW51KTsKICAgICAgICByZXR1cm4gbmV4dCh7CiAgICAgICAgICBwYXRoOiByZWRpcmVjdC5mdWxsUGF0aAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQoKICBuZXh0KCk7Cn07Ci8qKgogKiDov5vluqbmnaHnu5PmnZ8KICogQHBhcmFtIHRvCiAqIEBwYXJhbSBmb3JtCiAqIEBwYXJhbSBvcHRpb25zCiAqLwoKCnZhciBwcm9ncmVzc0RvbmUgPSBmdW5jdGlvbiBwcm9ncmVzc0RvbmUoKSB7CiAgLy8gZmluaXNoIHByb2dyZXNzIGJhcgogIE5Qcm9ncmVzcy5kb25lKCk7Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgYmVmb3JlRWFjaDogW3Byb2dyZXNzU3RhcnQsIGxvZ2luR3VhcmQsIGF1dGhvcml0eUd1YXJkLCByZWRpcmVjdEd1YXJkXSwKICBhZnRlckVhY2g6IFtwcm9ncmVzc0RvbmVdCn07"},{"version":3,"sources":["C:/Users/maxzh/OneDrive/桌面/vue-antd-admin-master/src/router/guards.js"],"names":["hasAuthority","loginIgnore","checkAuthorization","NProgress","configure","showSpinner","progressStart","to","from","next","isStarted","start","loginGuard","options","message","includes","warning","path","authorityGuard","store","permissions","getters","roles","fullPath","redirectGuard","getFirstChild","routes","route","children","length","state","setting","layout","firstMenu","find","item","commit","subMenu","redirect","progressDone","done","beforeEach","afterEach"],"mappings":";;;;AAAA,SAAQA,YAAR,QAA2B,yBAA3B;AACA,SAAQC,WAAR,QAA0B,gBAA1B;AACA,SAAQC,kBAAR,QAAiC,iBAAjC;AACA,OAAOC,SAAP,MAAsB,WAAtB;AAEAA,SAAS,CAACC,SAAV,CAAoB;AAAEC,EAAAA,WAAW,EAAE;AAAf,CAApB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACxC;AACA,MAAI,CAACN,SAAS,CAACO,SAAV,EAAL,EAA4B;AAC1BP,IAAAA,SAAS,CAACQ,KAAV;AACD;;AACDF,EAAAA,IAAI;AACL,CAND;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMG,UAAU,GAAG,SAAbA,UAAa,CAACL,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAiBI,OAAjB,EAA6B;AAC9C,MAAOC,OAAP,GAAkBD,OAAlB,CAAOC,OAAP;;AACA,MAAI,CAACb,WAAW,CAACc,QAAZ,CAAqBR,EAArB,CAAD,IAA6B,CAACL,kBAAkB,EAApD,EAAwD;AACtDY,IAAAA,OAAO,CAACE,OAAR,CAAgB,aAAhB;AACAP,IAAAA,IAAI,CAAC;AAACQ,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAJ;AACD,GAHD,MAGO;AACLR,IAAAA,IAAI;AACL;AACF,CARD;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMS,cAAc,GAAG,SAAjBA,cAAiB,CAACX,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAiBI,OAAjB,EAA6B;AAClD,MAAOM,KAAP,GAAyBN,OAAzB,CAAOM,KAAP;AAAA,MAAcL,OAAd,GAAyBD,OAAzB,CAAcC,OAAd;AACA,MAAMM,WAAW,GAAGD,KAAK,CAACE,OAAN,CAAc,qBAAd,CAApB;AACA,MAAMC,KAAK,GAAGH,KAAK,CAACE,OAAN,CAAc,eAAd,CAAd;;AACA,MAAI,CAACrB,YAAY,CAACO,EAAD,EAAKa,WAAL,EAAkBE,KAAlB,CAAjB,EAA2C;AACzCR,IAAAA,OAAO,CAACE,OAAR,+EAAgCT,EAAE,CAACgB,QAAnC;AACAd,IAAAA,IAAI,CAAC;AAACQ,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAJ,CAFyC,CAGzC;AACD,GAJD,MAIO;AACLR,IAAAA,IAAI;AACL;AACF,CAXD;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMe,aAAa,GAAG,SAAhBA,aAAgB,CAACjB,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAiBI,OAAjB,EAA6B;AACjD,MAAOM,KAAP,GAAgBN,OAAhB,CAAOM,KAAP;;AACA,MAAMM,aAAa,GAAG,SAAhBA,aAAgB,CAACC,MAAD,EAAY;AAChC,QAAMC,KAAK,GAAGD,MAAM,CAAC,CAAD,CAApB;;AACA,QAAI,CAACC,KAAK,CAACC,QAAP,IAAmBD,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,CAAjD,EAAoD;AAClD,aAAOF,KAAP;AACD;;AACD,WAAOF,aAAa,CAACE,KAAK,CAACC,QAAP,CAApB;AACD,GAND;;AAOA,MAAIT,KAAK,CAACW,KAAN,CAAYC,OAAZ,CAAoBC,MAApB,KAA+B,KAAnC,EAA0C;AACxC,QAAMC,SAAS,GAAGd,KAAK,CAACE,OAAN,CAAc,mBAAd,CAAlB;;AACA,QAAIY,SAAS,CAACC,IAAV,CAAe,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACZ,QAAL,KAAkBhB,EAAE,CAACgB,QAAzB;AAAA,KAAnB,CAAJ,EAA2D;AACzDJ,MAAAA,KAAK,CAACiB,MAAN,CAAa,2BAAb,EAA0C7B,EAAE,CAACgB,QAA7C;AACA,UAAMc,OAAO,GAAGlB,KAAK,CAACE,OAAN,CAAc,iBAAd,CAAhB;;AACA,UAAIgB,OAAO,CAACR,MAAR,GAAiB,CAArB,EAAwB;AACtB,YAAMS,QAAQ,GAAGb,aAAa,CAACY,OAAD,CAA9B;AACA,eAAO5B,IAAI,CAAC;AAACQ,UAAAA,IAAI,EAAEqB,QAAQ,CAACf;AAAhB,SAAD,CAAX;AACD;AACF;AACF;;AACDd,EAAAA,IAAI;AACL,CArBD;AAuBA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAM8B,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB;AACApC,EAAAA,SAAS,CAACqC,IAAV;AACD,CAHD;;AAKA,eAAe;AACbC,EAAAA,UAAU,EAAE,CAACnC,aAAD,EAAgBM,UAAhB,EAA4BM,cAA5B,EAA4CM,aAA5C,CADC;AAEbkB,EAAAA,SAAS,EAAE,CAACH,YAAD;AAFE,CAAf","sourcesContent":["import {hasAuthority} from '@/utils/authority-utils'\nimport {loginIgnore} from '@/router/index'\nimport {checkAuthorization} from '@/utils/request'\nimport NProgress from 'nprogress'\n\nNProgress.configure({ showSpinner: false })\n\n/**\n * 进度条开始\n * @param to\n * @param form\n * @param next\n */\nconst progressStart = (to, from, next) => {\n  // start progress bar\n  if (!NProgress.isStarted()) {\n    NProgress.start()\n  }\n  next()\n}\n\n/**\n * 登录守卫\n * @param to\n * @param form\n * @param next\n * @param options\n */\nconst loginGuard = (to, from, next, options) => {\n  const {message} = options\n  if (!loginIgnore.includes(to) && !checkAuthorization()) {\n    message.warning('登录已失效，请重新登录')\n    next({path: '/login'})\n  } else {\n    next()\n  }\n}\n\n/**\n * 权限守卫\n * @param to\n * @param form\n * @param next\n * @param options\n */\nconst authorityGuard = (to, from, next, options) => {\n  const {store, message} = options\n  const permissions = store.getters['account/permissions']\n  const roles = store.getters['account/roles']\n  if (!hasAuthority(to, permissions, roles)) {\n    message.warning(`对不起，您无权访问页面: ${to.fullPath}，请联系管理员`)\n    next({path: '/403'})\n    // NProgress.done()\n  } else {\n    next()\n  }\n}\n\n/**\n * 混合导航模式下一级菜单跳转重定向\n * @param to\n * @param from\n * @param next\n * @param options\n * @returns {*}\n */\nconst redirectGuard = (to, from, next, options) => {\n  const {store} = options\n  const getFirstChild = (routes) => {\n    const route = routes[0]\n    if (!route.children || route.children.length === 0) {\n      return route\n    }\n    return getFirstChild(route.children)\n  }\n  if (store.state.setting.layout === 'mix') {\n    const firstMenu = store.getters['setting/firstMenu']\n    if (firstMenu.find(item => item.fullPath === to.fullPath)) {\n      store.commit('setting/setActivatedFirst', to.fullPath)\n      const subMenu = store.getters['setting/subMenu']\n      if (subMenu.length > 0) {\n        const redirect = getFirstChild(subMenu)\n        return next({path: redirect.fullPath})\n      }\n    }\n  }\n  next()\n}\n\n/**\n * 进度条结束\n * @param to\n * @param form\n * @param options\n */\nconst progressDone = () => {\n  // finish progress bar\n  NProgress.done()\n}\n\nexport default {\n  beforeEach: [progressStart, loginGuard, authorityGuard, redirectGuard],\n  afterEach: [progressDone]\n}\n"]}]}