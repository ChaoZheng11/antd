{"remainingRequest":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\utils\\authority-utils.js","dependencies":[{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\utils\\authority-utils.js","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\babel.config.js","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL21heHpoL09uZURyaXZlL1x1Njg0Q1x1OTc2Mi92dWUtYW50ZC1hZG1pbi1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkM6L1VzZXJzL21heHpoL09uZURyaXZlL1x1Njg0Q1x1OTc2Mi92dWUtYW50ZC1hZG1pbi1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvbWF4emgvT25lRHJpdmUvXHU2ODRDXHU5NzYyL3Z1ZS1hbnRkLWFkbWluLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwoKLyoqCiAqIOWIpOaWreaYr+WQpuaciei3r+eUseeahOadg+mZkAogKiBAcGFyYW0gYXV0aG9yaXR5IOi3r+eUseadg+mZkOmFjee9rgogKiBAcGFyYW0gcGVybWlzc2lvbnMg55So5oi35p2D6ZmQ6ZuG5ZCICiAqIEByZXR1cm5zIHtib29sZWFufCp9CiAqLwpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKGF1dGhvcml0eSwgcGVybWlzc2lvbnMpIHsKICB2YXIgcmVxdWlyZWQgPSAnKic7CgogIGlmICh0eXBlb2YgYXV0aG9yaXR5ID09PSAnc3RyaW5nJykgewogICAgcmVxdWlyZWQgPSBhdXRob3JpdHk7CiAgfSBlbHNlIGlmIChfdHlwZW9mKGF1dGhvcml0eSkgPT09ICdvYmplY3QnKSB7CiAgICByZXF1aXJlZCA9IGF1dGhvcml0eS5wZXJtaXNzaW9uOwogIH0KCiAgcmV0dXJuIHJlcXVpcmVkID09PSAnKicgfHwgcGVybWlzc2lvbnMgJiYgcGVybWlzc2lvbnMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbSA9PT0gcmVxdWlyZWQgfHwgaXRlbS5pZCA9PT0gcmVxdWlyZWQ7CiAgfSkgIT09IC0xOwp9Ci8qKgogKiDliKTmlq3mmK/lkKbmnInot6/nlLHpnIDopoHnmoTop5LoibIKICogQHBhcmFtIGF1dGhvcml0eSDot6/nlLHmnYPpmZDphY3nva4KICogQHBhcmFtIHJvbGVzIOeUqOaIt+inkuiJsumbhuWQiAogKi8KCgpmdW5jdGlvbiBoYXNSb2xlKGF1dGhvcml0eSwgcm9sZXMpIHsKICB2YXIgcmVxdWlyZWQgPSB1bmRlZmluZWQ7CgogIGlmIChfdHlwZW9mKGF1dGhvcml0eSkgPT09ICdvYmplY3QnKSB7CiAgICByZXF1aXJlZCA9IGF1dGhvcml0eS5yb2xlOwogIH0KCiAgcmV0dXJuIGF1dGhvcml0eSA9PT0gJyonIHx8IGhhc0FueVJvbGUocmVxdWlyZWQsIHJvbGVzKTsKfQovKioKICog5Yik5pat5piv5ZCm5pyJ6ZyA6KaB55qE5Lu75oSP5LiA5Liq6KeS6ImyCiAqIEBwYXJhbSByZXF1aXJlZCB7U3RyaW5nIHwgQXJyYXlbU3RyaW5nXX0g6ZyA6KaB55qE6KeS6Imy77yM5Y+v5Lul5piv5Y2V5Liq6KeS6Imy5oiW6ICF5LiA5Liq6KeS6Imy5pWw57uECiAqIEBwYXJhbSByb2xlcyDmi6XmnInnmoTop5LoibIKICogQHJldHVybnMge2Jvb2xlYW59CiAqLwoKCmZ1bmN0aW9uIGhhc0FueVJvbGUocmVxdWlyZWQsIHJvbGVzKSB7CiAgaWYgKCFyZXF1aXJlZCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXF1aXJlZCkpIHsKICAgIHJldHVybiByb2xlcy5maW5kSW5kZXgoZnVuY3Rpb24gKHJvbGUpIHsKICAgICAgcmV0dXJuIHJlcXVpcmVkLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSByb2xlIHx8IGl0ZW0gPT09IHJvbGUuaWQ7CiAgICAgIH0pICE9PSAtMTsKICAgIH0pICE9PSAtMTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocm9sZSkgewogICAgICByZXR1cm4gcm9sZSA9PT0gcmVxdWlyZWQgfHwgcm9sZS5pZCA9PT0gcmVxdWlyZWQ7CiAgICB9KSAhPT0gLTE7CiAgfQp9Ci8qKgogKiDot6/nlLHmnYPpmZDmoKHpqowKICogQHBhcmFtIHJvdXRlIOi3r+eUsQogKiBAcGFyYW0gcGVybWlzc2lvbnMg55So5oi35p2D6ZmQ6ZuG5ZCICiAqIEBwYXJhbSByb2xlcyDnlKjmiLfop5LoibLpm4blkIgKICogQHJldHVybnMge2Jvb2xlYW59CiAqLwoKCmZ1bmN0aW9uIGhhc0F1dGhvcml0eShyb3V0ZSwgcGVybWlzc2lvbnMsIHJvbGVzKSB7CiAgdmFyIGF1dGhvcml0aWVzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyb3V0ZS5tZXRhLnBBdXRob3JpdGllcyksIFtyb3V0ZS5tZXRhLmF1dGhvcml0eV0pOwoKICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYXV0aG9yaXRpZXMpLAogICAgICBfc3RlcDsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBhdXRob3JpdHkgPSBfc3RlcC52YWx1ZTsKCiAgICAgIGlmICghaGFzUGVybWlzc2lvbihhdXRob3JpdHksIHBlcm1pc3Npb25zKSAmJiAhaGFzUm9sZShhdXRob3JpdHksIHJvbGVzKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yLmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yLmYoKTsKICB9CgogIHJldHVybiB0cnVlOwp9Ci8qKgogKiDmoLnmja7mnYPpmZDphY3nva7ov4fmu6Toj5zljZXmlbDmja4KICogQHBhcmFtIG1lbnVEYXRhCiAqIEBwYXJhbSBwZXJtaXNzaW9ucwogKiBAcGFyYW0gcm9sZXMKICovCgoKZnVuY3Rpb24gZmlsdGVyTWVudShtZW51RGF0YSwgcGVybWlzc2lvbnMsIHJvbGVzKSB7CiAgcmV0dXJuIG1lbnVEYXRhLmZpbHRlcihmdW5jdGlvbiAobWVudSkgewogICAgaWYgKG1lbnUubWV0YSAmJiBtZW51Lm1ldGEuaW52aXNpYmxlID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKCFoYXNBdXRob3JpdHkobWVudSwgcGVybWlzc2lvbnMsIHJvbGVzKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIGlmIChtZW51LmNoaWxkcmVuICYmIG1lbnUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICBtZW51LmNoaWxkcmVuID0gZmlsdGVyTWVudShtZW51LmNoaWxkcmVuLCBwZXJtaXNzaW9ucywgcm9sZXMpOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0pOwp9CgpleHBvcnQgeyBmaWx0ZXJNZW51LCBoYXNBdXRob3JpdHkgfTs="},{"version":3,"sources":["C:/Users/maxzh/OneDrive/桌面/vue-antd-admin-master/src/utils/authority-utils.js"],"names":["hasPermission","authority","permissions","required","permission","findIndex","item","id","hasRole","roles","undefined","role","hasAnyRole","Array","isArray","hasAuthority","route","authorities","meta","pAuthorities","filterMenu","menuData","filter","menu","invisible","children","length"],"mappings":"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","sourcesContent":["/**\n * 判断是否有路由的权限\n * @param authority 路由权限配置\n * @param permissions 用户权限集合\n * @returns {boolean|*}\n */\nfunction hasPermission(authority, permissions) {\n  let required = '*'\n  if (typeof authority === 'string') {\n    required = authority\n  } else if (typeof authority === 'object') {\n    required = authority.permission\n  }\n  return required === '*' || (permissions && permissions.findIndex(item => item === required || item.id === required) !== -1)\n}\n\n/**\n * 判断是否有路由需要的角色\n * @param authority 路由权限配置\n * @param roles 用户角色集合\n */\nfunction hasRole(authority, roles) {\n  let required = undefined\n  if (typeof authority === 'object') {\n    required = authority.role\n  }\n  return authority === '*' || hasAnyRole(required, roles)\n}\n\n/**\n * 判断是否有需要的任意一个角色\n * @param required {String | Array[String]} 需要的角色，可以是单个角色或者一个角色数组\n * @param roles 拥有的角色\n * @returns {boolean}\n */\nfunction hasAnyRole(required, roles) {\n  if (!required) {\n    return false\n  } else if(Array.isArray(required)) {\n    return roles.findIndex(role => {\n      return required.findIndex(item => item === role || item === role.id) !== -1\n    }) !== -1\n  } else {\n    return roles.findIndex(role => role === required || role.id === required) !== -1\n  }\n}\n\n/**\n * 路由权限校验\n * @param route 路由\n * @param permissions 用户权限集合\n * @param roles 用户角色集合\n * @returns {boolean}\n */\nfunction hasAuthority(route, permissions, roles) {\n  const authorities = [...route.meta.pAuthorities, route.meta.authority]\n  for (let authority of authorities) {\n    if (!hasPermission(authority, permissions) && !hasRole(authority, roles)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * 根据权限配置过滤菜单数据\n * @param menuData\n * @param permissions\n * @param roles\n */\nfunction filterMenu(menuData, permissions, roles) {\n  return menuData.filter(menu => {\n    if (menu.meta && menu.meta.invisible === undefined) {\n      if (!hasAuthority(menu, permissions, roles)) {\n        return false\n      }\n    }\n    if (menu.children && menu.children.length > 0) {\n      menu.children = filterMenu(menu.children, permissions, roles)\n    }\n    return true\n  })\n}\n\nexport {filterMenu, hasAuthority}\n"]}]}