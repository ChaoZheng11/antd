{"remainingRequest":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\components\\table\\advance\\SearchArea.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\src\\components\\table\\advance\\SearchArea.vue","mtime":1637637094000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxzh\\OneDrive\\桌面\\vue-antd-admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmYXN0RXF1YWwgZnJvbSAnZmFzdC1kZWVwLWVxdWFsJwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2VhcmNoQXJlYScsCiAgcHJvcHM6IFsnY29sdW1ucycsICdmb3JtYXRDb25kaXRpb25zJ10sCiAgaW5qZWN0OiBbJ3RhYmxlJ10sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZm9ybWF0Q29sdW1ucyh0aGlzLmNvbHVtbnMpCiAgfSwKICB3YXRjaDogewogICAgY29sdW1ucyhuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsICE9IG9sZFZhbCkgewogICAgICAgIHRoaXMuZm9ybWF0Q29sdW1ucyhuZXdWYWwpCiAgICAgIH0KICAgIH0sCiAgICBzZWFyY2hDb2xzKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwubGVuZ3RoICE9IG9sZFZhbC5sZW5ndGgpIHsKICAgICAgICBjb25zdCBuZXdDb25kaXRpb25zID0gdGhpcy5nZXRDb25kaXRpb25zKG5ld1ZhbCkKICAgICAgICBjb25zdCBuZXdTZWFyY2hPcHRpb25zID0gdGhpcy5nZXRTZWFyY2hPcHRpb25zKG5ld1ZhbCkKICAgICAgICBpZiAoIWZhc3RFcXVhbChuZXdDb25kaXRpb25zLCB0aGlzLmNvbmRpdGlvbnMpKSB7CiAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMgPSBuZXdDb25kaXRpb25zCiAgICAgICAgICB0aGlzLnNlYXJjaE9wdGlvbnMgPSBuZXdTZWFyY2hPcHRpb25zCiAgICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLmNvbmRpdGlvbnMsIHRoaXMuc2VhcmNoT3B0aW9ucykKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb25kaXRpb25zOiB7fSwKICAgICAgc2VhcmNoT3B0aW9uczogW10KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBzZWFyY2hDb2xzKCkgewogICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLmZpbHRlcihpdGVtID0+IGl0ZW0uc2VhcmNoQWJsZSkKICAgIH0sCiAgICBzZWFyY2hJZFByZWZpeCgpIHsKICAgICAgcmV0dXJuIHRoaXMudGFibGUuaWQgKyAnLWlwdC0nCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkNsb3NlQ2xpY2soZSwgY29sKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpCiAgICAgIGNvbC5zZWFyY2gudmFsdWUgPSB1bmRlZmluZWQKICAgICAgY29uc3Qge2JhY2t1cCwgdmFsdWV9ID0gY29sLnNlYXJjaAogICAgICBpZiAoYmFja3VwICE9PSB2YWx1ZSkgewogICAgICAgIHRoaXMuYmFja3VwQW5kRW1pdENoYW5nZShjb2wpCiAgICAgIH0KICAgIH0sCiAgICBvbkNhbmNlbChjb2wpIHsKICAgICAgY29sLnNlYXJjaC52YWx1ZSA9IGNvbC5zZWFyY2guYmFja3VwCiAgICAgIGNvbC5zZWFyY2gudmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgb25Db25maXJtKGNvbCkgewogICAgICBjb25zdCB7YmFja3VwLCB2YWx1ZX0gPSBjb2wuc2VhcmNoCiAgICAgIGNvbC5zZWFyY2gudmlzaWJsZSA9IGZhbHNlCiAgICAgIGlmIChiYWNrdXAgIT09IHZhbHVlKSB7CiAgICAgICAgdGhpcy5iYWNrdXBBbmRFbWl0Q2hhbmdlKGNvbCkKICAgICAgfQogICAgfSwKICAgIG9uU3dpdGNoQ2hhbmdlKGNvbCkgewogICAgICBjb25zdCB7YmFja3VwLCB2YWx1ZX0gPSBjb2wuc2VhcmNoCiAgICAgIGlmIChiYWNrdXAgIT09IHZhbHVlKSB7CiAgICAgICAgdGhpcy5iYWNrdXBBbmRFbWl0Q2hhbmdlKGNvbCkKICAgICAgfQogICAgfSwKICAgIG9uU2VsZWN0Q2hhbmdlKGNvbCkgewogICAgICB0aGlzLmJhY2t1cEFuZEVtaXRDaGFuZ2UoY29sKQogICAgfSwKICAgIG9uQ2FsZW5kYXJPcGVuQ2hhbmdlKG9wZW4sIGNvbCkgewogICAgICBjb2wuc2VhcmNoLnZpc2libGUgPSBvcGVuCiAgICAgIGNvbnN0IHttb21lbnRFcXVhbCwgYmFja3VwQW5kRW1pdENoYW5nZX0gPSB0aGlzCiAgICAgIGNvbnN0IHt2YWx1ZSwgYmFja3VwLCBmb3JtYXR9ID0gY29sLnNlYXJjaAogICAgICBpZiAoIW9wZW4gJiYgIW1vbWVudEVxdWFsKHZhbHVlLCBiYWNrdXAsIGZvcm1hdCkpIHsKICAgICAgICBiYWNrdXBBbmRFbWl0Q2hhbmdlKGNvbCwgbW9tZW50KHZhbHVlKSkKICAgICAgfQogICAgfSwKICAgIG9uQ2FsZW5kYXJDaGFuZ2UoZGF0ZSwgZGF0ZVN0ciwgY29sKSB7CiAgICAgIGNvbnN0IHttb21lbnRFcXVhbCwgYmFja3VwQW5kRW1pdENoYW5nZX0gPSB0aGlzCiAgICAgIGNvbnN0IHt2YWx1ZSwgYmFja3VwLCBmb3JtYXR9ID0gY29sLnNlYXJjaAogICAgICBpZiAoIWNvbC5zZWFyY2gudmlzaWJsZSAmJiAhbW9tZW50RXF1YWwodmFsdWUsIGJhY2t1cCwgZm9ybWF0KSkgewogICAgICAgIGJhY2t1cEFuZEVtaXRDaGFuZ2UoY29sLCBtb21lbnQodmFsdWUpKQogICAgICB9CiAgICB9LAogICAgb25EYXRlQ2hhbmdlKGNvbCkgewogICAgICBjb25zdCB7bW9tZW50RXF1YWwsIGJhY2t1cEFuZEVtaXRDaGFuZ2V9ID0gdGhpcwogICAgICBjb25zdCB7dmFsdWUsIGJhY2t1cCwgZm9ybWF0fSA9IGNvbC5zZWFyY2gKICAgICAgaWYgKCFtb21lbnRFcXVhbCh2YWx1ZSwgYmFja3VwLCBmb3JtYXQpKSB7CiAgICAgICAgYmFja3VwQW5kRW1pdENoYW5nZShjb2wsIG1vbWVudCh2YWx1ZSkpCiAgICAgIH0KICAgIH0sCiAgICBnZXRGb3JtYXQoY29sKSB7CiAgICAgIGlmIChjb2wuc2VhcmNoICYmIGNvbC5zZWFyY2guZm9ybWF0KSB7CiAgICAgICAgcmV0dXJuIGNvbC5zZWFyY2guZm9ybWF0CiAgICAgIH0KICAgICAgY29uc3QgZGF0YVR5cGUgPSBjb2wuZGF0YVR5cGUKICAgICAgc3dpdGNoKGRhdGFUeXBlKSB7CiAgICAgICAgY2FzZSAndGltZSc6IHJldHVybiAnSEg6bW06c3MnCiAgICAgICAgY2FzZSAnZGF0ZSc6IHJldHVybiAnWVlZWS1NTS1ERCcKICAgICAgICBjYXNlICdkYXRldGltZSc6IHJldHVybiAnWVlZWS1NTS1ERCBISDptbTpzcycKICAgICAgICBkZWZhdWx0OiByZXR1cm4gdW5kZWZpbmVkCiAgICAgIH0KICAgIH0sCiAgICBiYWNrdXBBbmRFbWl0Q2hhbmdlKGNvbCwgYmFja1ZhbHVlID0gY29sLnNlYXJjaC52YWx1ZSkgewogICAgICBjb25zdCB7Z2V0Q29uZGl0aW9ucywgZ2V0U2VhcmNoT3B0aW9uc30gPSB0aGlzCiAgICAgIGNvbC5zZWFyY2guYmFja3VwID0gYmFja1ZhbHVlCiAgICAgIHRoaXMuY29uZGl0aW9ucyA9IGdldENvbmRpdGlvbnModGhpcy5zZWFyY2hDb2xzKQogICAgICB0aGlzLnNlYXJjaE9wdGlvbnMgPSBnZXRTZWFyY2hPcHRpb25zKHRoaXMuc2VhcmNoQ29scykKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy5jb25kaXRpb25zLCB0aGlzLnNlYXJjaE9wdGlvbnMpCiAgICB9LAogICAgZ2V0Q29uZGl0aW9ucyhjb2x1bW5zKSB7CiAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSB7fQogICAgICBjb2x1bW5zLmZpbHRlcihpdGVtID0+IGl0ZW0uc2VhcmNoLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgaXRlbS5zZWFyY2gudmFsdWUgIT09ICcnICYmIGl0ZW0uc2VhcmNoLnZhbHVlICE9PSBudWxsKQogICAgICAgIC5mb3JFYWNoKGNvbCA9PiB7CiAgICAgICAgICBjb25zdCB7dmFsdWUsIGZvcm1hdH0gPSBjb2wuc2VhcmNoCiAgICAgICAgICBpZiAodGhpcy5mb3JtYXRDb25kaXRpb25zICYmIGZvcm1hdCkgewogICAgICAgICAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIGNvbmRpdGlvbnNbY29sLmRhdGFJbmRleF0gPSBmb3JtYXQoY29sLnNlYXJjaC52YWx1ZSkKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybWF0ID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lID09PSAnTW9tZW50JykgewogICAgICAgICAgICAgIGNvbmRpdGlvbnNbY29sLmRhdGFJbmRleF0gPSB2YWx1ZS5mb3JtYXQoZm9ybWF0KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbmRpdGlvbnNbY29sLmRhdGFJbmRleF0gPSB2YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25kaXRpb25zW2NvbC5kYXRhSW5kZXhdID0gdmFsdWUKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICByZXR1cm4gY29uZGl0aW9ucwogICAgfSwKICAgIGdldFNlYXJjaE9wdGlvbnMoY29sdW1ucykgewogICAgICByZXR1cm4gY29sdW1ucy5maWx0ZXIoaXRlbSA9PiBpdGVtLnNlYXJjaC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIGl0ZW0uc2VhcmNoLnZhbHVlICE9PSAnJyAmJiBpdGVtLnNlYXJjaC52YWx1ZSAhPT0gbnVsbCkKICAgICAgICAubWFwKCh7ZGF0YUluZGV4LCBzZWFyY2h9KSA9PiAoe2ZpZWxkOiBkYXRhSW5kZXgsIHZhbHVlOiBzZWFyY2gudmFsdWUsIGZvcm1hdDogc2VhcmNoLmZvcm1hdH0pKQogICAgfSwKICAgIG9uVmlzaWJsZUNoYW5nZShjb2wsIGluZGV4KSB7CiAgICAgIGlmICghY29sLnNlYXJjaC52aXNpYmxlKSB7CiAgICAgICAgY29sLnNlYXJjaC52YWx1ZSA9IGNvbC5zZWFyY2guYmFja3VwCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy5zZWFyY2hJZFByZWZpeH0ke2luZGV4fWApCiAgICAgICAgaWYgKGlucHV0KSB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtpbnB1dC5mb2N1cygpfSwgMCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3RoaXMuc2VhcmNoSWRQcmVmaXh9JHtpbmRleH1gKQogICAgICAgICAgICBpbnB1dC5mb2N1cygpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG1vbWVudEVxdWFsKHRhcmdldCwgc291cmNlLCBmb3JtYXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfSBlbHNlIGlmICh0YXJnZXQgJiYgc291cmNlICYmIHRhcmdldC5mb3JtYXQoZm9ybWF0KSA9PT0gc291cmNlLmZvcm1hdChmb3JtYXQpKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICByZXR1cm4gZmFsc2UKICAgIH0sCiAgICBmb3JtYXRDb2x1bW5zKGNvbHVtbnMpIHsKICAgICAgY29sdW1ucy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIHRoaXMuJHNldChpdGVtLCAnc2VhcmNoJywgey4uLml0ZW0uc2VhcmNoLCB2aXNpYmxlOiBmYWxzZSwgdmFsdWU6IHVuZGVmaW5lZCwgZm9ybWF0OiB0aGlzLmdldEZvcm1hdChpdGVtKX0pCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["SearchArea.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchArea.vue","sourceRoot":"src/components/table/advance","sourcesContent":["<template>\n  <div class=\"search-area\" ref=\"root\">\n    <div class=\"select-root\" ref=\"selectRoot\"></div>\n    <div class=\"search-item\" :key=\"index\" v-for=\"(col, index) in searchCols\">\n      <div v-if=\"col.dataType === 'boolean'\" :class=\"['title', {active: col.search.value !== undefined}]\">\n        <template v-if=\"col.title\">\n          {{col.title}}:\n        </template>\n        <slot v-else-if=\"col.slots && col.slots.title\" :name=\"col.slots.title\"></slot>\n        <a-switch @change=\"onSwitchChange(col)\" class=\"switch\" v-model=\"col.search.value\" size=\"small\"\n                  :checked-children=\"(col.search.switchOptions && col.search.switchOptions.checkedText) || '是'\"\n                  :un-checked-children=\"(col.search.switchOptions && col.search.switchOptions.uncheckedText) || '否'\"\n        />\n        <a-icon v-if=\"col.search.value !== undefined\" class=\"close\" @click=\"e => onCloseClick(e, col)\" type=\"close-circle\" theme=\"filled\" />\n      </div>\n      <div v-else-if=\"col.dataType === 'time'\" :class=\"['title', {active: col.search.value}]\">\n        <template v-if=\"col.title\">\n          {{col.title}}:\n        </template>\n        <slot v-else-if=\"col.slots && col.slots.title\" :name=\"col.slots.title\"></slot>\n        <a-time-picker :format=\"col.search.format\" v-model=\"col.search.value\" placeholder=\"选择时间\" @change=\"(time, timeStr) => onCalendarChange(time, timeStr, col)\" @openChange=\"open => onCalendarOpenChange(open, col)\" class=\"time-picker\" size=\"small\" :get-popup-container=\"() => $refs.root\"/>\n      </div>\n      <div v-else-if=\"col.dataType === 'date'\" :class=\"['title', {active: col.search.value}]\">\n        <template v-if=\"col.title\">\n          {{col.title}}:\n        </template>\n        <slot v-else-if=\"col.slots && col.slots.title\" :name=\"col.slots.title\"></slot>\n        <a-date-picker :format=\"col.search.format\" v-model=\"col.search.value\" @change=\"onDateChange(col)\" class=\"date-picker\" size=\"small\" :getCalendarContainer=\"() => $refs.root\"/>\n      </div>\n      <div v-else-if=\"col.dataType === 'datetime'\" class=\"title datetime active\">\n        <template v-if=\"col.title\">\n          {{col.title}}:\n        </template>\n        <slot v-else-if=\"col.slots && col.slots.title\" :name=\"col.slots.title\"></slot>\n        <a-date-picker :format=\"col.search.format\" v-model=\"col.search.value\" @change=\"(date, dateStr) => onCalendarChange(date, dateStr, col)\" @openChange=\"open => onCalendarOpenChange(open, col)\" class=\"datetime-picker\" size=\"small\" show-time :getCalendarContainer=\"() => $refs.root\"/>\n      </div>\n      <div v-else-if=\"col.dataType === 'select'\" :class=\"['title', {active: col.search.value !== undefined}]\">\n        <template v-if=\"col.title\">\n          {{col.title}}:\n        </template>\n        <slot v-else-if=\"col.slots && col.slots.title\" :name=\"col.slots.title\"></slot>\n        <a-select :allowClear=\"true\" :options=\"col.search.selectOptions\" v-model=\"col.search.value\" placeholder=\"请选择...\" @change=\"onSelectChange(col)\" class=\"select\" slot=\"content\" size=\"small\" :get-popup-container=\"() => $refs.selectRoot\">\n        </a-select>\n      </div>\n      <div v-else :class=\"['title', {active: col.search.value}]\">\n        <a-popover @visibleChange=\"onVisibleChange(col, index)\" v-model=\"col.search.visible\" placement=\"bottom\" :trigger=\"['click']\" :get-popup-container=\"() => $refs.root\">\n          <template v-if=\"col.title\">\n            {{col.title}}\n          </template>\n          <slot v-else-if=\"col.slots && col.slots.title\" :name=\"col.slots.title\"></slot>\n          <div class=\"value \" v-if=\"col.search.value\">:&nbsp;&nbsp;{{col.search.format && typeof col.search.format === 'function' ? col.search.format(col.search.value) : col.search.value}}</div>\n          <a-icon v-if=\"!col.search.value\" class=\"icon-down\" type=\"down\"/>\n          <div class=\"operations\" slot=\"content\">\n            <a-button @click=\"onCancel(col)\" class=\"btn\" size=\"small\" type=\"link\">取消</a-button>\n            <a-button @click=\"onConfirm(col)\" class=\"btn\" size=\"small\" type=\"primary\">确认</a-button>\n          </div>\n          <div class=\"search-overlay\" slot=\"title\">\n            <a-input :id=\"`${searchIdPrefix}${index}`\" :allow-clear=\"true\" @keyup.esc=\"onCancel(col)\" @keyup.enter=\"onConfirm(col)\" v-model=\"col.search.value\" size=\"small\" />\n          </div>\n        </a-popover>\n        <a-icon v-if=\"col.search.value\" @click=\"e => onCloseClick(e, col)\" class=\"close\" type=\"close-circle\" theme=\"filled\"/>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import fastEqual from 'fast-deep-equal'\n  import moment from 'moment'\n\n  export default {\n    name: 'SearchArea',\n    props: ['columns', 'formatConditions'],\n    inject: ['table'],\n    created() {\n      this.formatColumns(this.columns)\n    },\n    watch: {\n      columns(newVal, oldVal) {\n        if (newVal != oldVal) {\n          this.formatColumns(newVal)\n        }\n      },\n      searchCols(newVal, oldVal) {\n        if (newVal.length != oldVal.length) {\n          const newConditions = this.getConditions(newVal)\n          const newSearchOptions = this.getSearchOptions(newVal)\n          if (!fastEqual(newConditions, this.conditions)) {\n            this.conditions = newConditions\n            this.searchOptions = newSearchOptions\n            this.$emit('change', this.conditions, this.searchOptions)\n          }\n        }\n      }\n    },\n    data() {\n      return {\n        conditions: {},\n        searchOptions: []\n      }\n    },\n    computed: {\n      searchCols() {\n        return this.columns.filter(item => item.searchAble)\n      },\n      searchIdPrefix() {\n        return this.table.id + '-ipt-'\n      }\n    },\n    methods: {\n      onCloseClick(e, col) {\n        e.preventDefault()\n        e.stopPropagation()\n        col.search.value = undefined\n        const {backup, value} = col.search\n        if (backup !== value) {\n          this.backupAndEmitChange(col)\n        }\n      },\n      onCancel(col) {\n        col.search.value = col.search.backup\n        col.search.visible = false\n      },\n      onConfirm(col) {\n        const {backup, value} = col.search\n        col.search.visible = false\n        if (backup !== value) {\n          this.backupAndEmitChange(col)\n        }\n      },\n      onSwitchChange(col) {\n        const {backup, value} = col.search\n        if (backup !== value) {\n          this.backupAndEmitChange(col)\n        }\n      },\n      onSelectChange(col) {\n        this.backupAndEmitChange(col)\n      },\n      onCalendarOpenChange(open, col) {\n        col.search.visible = open\n        const {momentEqual, backupAndEmitChange} = this\n        const {value, backup, format} = col.search\n        if (!open && !momentEqual(value, backup, format)) {\n          backupAndEmitChange(col, moment(value))\n        }\n      },\n      onCalendarChange(date, dateStr, col) {\n        const {momentEqual, backupAndEmitChange} = this\n        const {value, backup, format} = col.search\n        if (!col.search.visible && !momentEqual(value, backup, format)) {\n          backupAndEmitChange(col, moment(value))\n        }\n      },\n      onDateChange(col) {\n        const {momentEqual, backupAndEmitChange} = this\n        const {value, backup, format} = col.search\n        if (!momentEqual(value, backup, format)) {\n          backupAndEmitChange(col, moment(value))\n        }\n      },\n      getFormat(col) {\n        if (col.search && col.search.format) {\n          return col.search.format\n        }\n        const dataType = col.dataType\n        switch(dataType) {\n          case 'time': return 'HH:mm:ss'\n          case 'date': return 'YYYY-MM-DD'\n          case 'datetime': return 'YYYY-MM-DD HH:mm:ss'\n          default: return undefined\n        }\n      },\n      backupAndEmitChange(col, backValue = col.search.value) {\n        const {getConditions, getSearchOptions} = this\n        col.search.backup = backValue\n        this.conditions = getConditions(this.searchCols)\n        this.searchOptions = getSearchOptions(this.searchCols)\n        this.$emit('change', this.conditions, this.searchOptions)\n      },\n      getConditions(columns) {\n        const conditions = {}\n        columns.filter(item => item.search.value !== undefined && item.search.value !== '' && item.search.value !== null)\n          .forEach(col => {\n            const {value, format} = col.search\n            if (this.formatConditions && format) {\n              if (typeof format === 'function') {\n                conditions[col.dataIndex] = format(col.search.value)\n              } else if (typeof format === 'string' && value.constructor.name === 'Moment') {\n                conditions[col.dataIndex] = value.format(format)\n              } else {\n                conditions[col.dataIndex] = value\n              }\n            } else {\n              conditions[col.dataIndex] = value\n            }\n          })\n        return conditions\n      },\n      getSearchOptions(columns) {\n        return columns.filter(item => item.search.value !== undefined && item.search.value !== '' && item.search.value !== null)\n          .map(({dataIndex, search}) => ({field: dataIndex, value: search.value, format: search.format}))\n      },\n      onVisibleChange(col, index) {\n        if (!col.search.visible) {\n          col.search.value = col.search.backup\n        } else {\n          let input = document.getElementById(`${this.searchIdPrefix}${index}`)\n          if (input) {\n            setTimeout(() => {input.focus()}, 0)\n          } else {\n            this.$nextTick(() => {\n              input = document.getElementById(`${this.searchIdPrefix}${index}`)\n              input.focus()\n            })\n          }\n        }\n      },\n      momentEqual(target, source, format) {\n        if (target === source) {\n          return true\n        } else if (target && source && target.format(format) === source.format(format)) {\n          return true\n        }\n        return false\n      },\n      formatColumns(columns) {\n        columns.forEach(item => {\n          this.$set(item, 'search', {...item.search, visible: false, value: undefined, format: this.getFormat(item)})\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"less\">\n.search-area{\n  .select-root{\n    text-align: left;\n  }\n  margin: -4px 0;\n  .search-item{\n    margin: 4px 4px;\n    display: inline-block;\n    .title{\n      padding: 4px 8px;\n      cursor: pointer;\n      border-radius: 4px;\n      user-select: none;\n      display: inline-flex;\n      align-items: center;\n      .close{\n        color: @text-color-second;\n        margin-left: 4px;\n        font-size: 12px;\n        vertical-align: middle;\n        :hover{\n          color: @text-color;\n        }\n      }\n      .switch{\n        margin-left: 4px;\n      }\n      .time-picker{\n        margin-left: 4px;\n        width: 96px;\n      }\n      .date-picker{\n        margin-left: 4px;\n        width: 120px;\n      }\n      .datetime-picker{\n        margin-left: 4px;\n        width: 195px;\n      }\n      .value{\n        display: inline-block;\n        overflow: hidden;\n        flex:1;\n        vertical-align: middle;\n        max-width: 144px;\n        text-overflow: ellipsis;\n        word-break: break-all;\n        white-space: nowrap;\n      }\n      &.active{\n        background-color: @layout-bg-color;\n      }\n    }\n    .icon-down{\n      vertical-align: middle;\n      font-size: 12px;\n    }\n  }\n  .search-overlay{\n    padding: 8px 0px;\n    text-align: center;\n  }\n  .select{\n    margin-left: 4px;\n    max-width: 144px;\n    min-width: 96px;\n    text-align: left;\n  }\n  .operations{\n    display: flex;\n    margin: -6px 0;\n    justify-content: space-between;\n    .btn{\n    }\n  }\n}\n</style>\n"]}]}